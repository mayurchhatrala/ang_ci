
angular.module("app").directive("uiNav",["$timeout",function(a){return{scope:true,restrict:"AC",link:function(h,g,b){var i=$(window),d=768,f=$(".app-aside"),e,c=".dropdown-backdrop";g.on("click","a",function(j){e&&e.trigger("mouseleave.nav");var k=$(this);k.parent().siblings(".active").toggleClass("active");k.next().is("ul")&&k.parent().toggleClass("active")&&j.preventDefault();k.next().is("ul")||((i.width()<d)&&$(".app-aside").removeClass("show off-screen"))});g.on("mouseenter","a",function(m){e&&e.trigger("mouseleave.nav");$("> .nav",f).remove();if(!$(".app-aside-fixed.app-aside-folded").length||(i.width()<d)||$(".app-aside-dock").length){return}var o=$(m.target),l,k=$(window).height(),n=50,j=150;!o.is("a")&&(o=o.closest("a"));if(o.next().is("ul")){e=o.next()}else{return}o.parent().addClass("active");l=o.parent().position().top+n;e.css("top",l);if(l+e.height()>k){e.css("bottom",0)}if(l+j>k){e.css("bottom",k-l-n).css("top","auto")}e.appendTo(f);e.on("mouseleave.nav",function(p){$(c).remove();e.appendTo(o.parent());e.off("mouseleave.nav").css("top","auto").css("bottom","auto");o.parent().removeClass("active")});$(".smart").length&&$('<div class="dropdown-backdrop"/>').insertAfter(".app-aside").on("click",function(p){p&&p.trigger("mouseleave.nav")})});f.on("mouseleave",function(j){e&&e.trigger("mouseleave.nav");$("> .nav",f).remove()})}}}]);